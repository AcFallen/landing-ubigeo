---
interface Props {
  baseUrl: string;
}
const { baseUrl } = Astro.props;
---

<section id="ep-departamentos" class="px-4 py-8 md:px-8 md:py-10 lg:px-14 lg:py-12 max-w-[900px]">

  <div class="flex items-center gap-2.5 mb-3">
    <span class="text-[11px] font-bold px-2.5 py-[5px] rounded-[5px] bg-emerald-100 text-emerald-700 border border-emerald-200">GET</span>
    <code class="font-mono text-sm md:text-[15px] font-medium text-gray-900">/departamentos</code>
  </div>
  <h2 class="text-lg md:text-[22px] font-bold text-gray-900 m-0 mb-2.5 tracking-tight">Listar todos los departamentos</h2>
  <p class="text-[13px] md:text-sm leading-relaxed text-gray-500 m-0 mb-6">
    Retorna la lista completa de los <strong class="text-gray-700">25 departamentos</strong> del Perú, ordenados por código.
  </p>

  <!-- Meta -->
  <div class="flex flex-col gap-2 bg-gray-50 border border-gray-200 rounded-lg px-4 py-3.5 mb-6">
    <div class="flex items-start gap-3 text-[13px]">
      <span class="text-[11px] font-semibold uppercase tracking-[0.04em] text-gray-400 min-w-[100px] pt-0.5">URL completa</span>
      <code class="font-mono text-xs text-gray-900 break-all">{baseUrl}/departamentos</code>
    </div>
    <div class="flex items-center gap-3 text-[13px]">
      <span class="text-[11px] font-semibold uppercase tracking-[0.04em] text-gray-400 min-w-[100px]">Autenticación</span>
      <span class="text-emerald-600 font-semibold text-[13px]">Ninguna</span>
    </div>
  </div>

  <!-- Tester -->
  <div class="border border-gray-200 rounded-xl overflow-hidden mb-7">
    <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200 text-[13px] font-semibold text-gray-500">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
      Probar endpoint
    </div>
    <div class="p-4">
      <div class="flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white">
        <span class="py-2.5 px-3.5 text-[11px] font-bold tracking-wider bg-emerald-50 text-emerald-700 border-r border-gray-200 shrink-0">GET</span>
        <div class="flex-1 px-3 py-2.5 font-mono text-xs text-gray-500 overflow-hidden text-ellipsis whitespace-nowrap">
          <span id="url-dep-list">{baseUrl}/departamentos</span>
        </div>
        <button class="flex items-center gap-1.5 px-4 py-2.5 bg-peru hover:bg-peru-dark text-white border-none text-[13px] font-semibold cursor-pointer shrink-0 transition-colors active:scale-[0.98]" data-endpoint="dep-list">
          Enviar <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
        </button>
      </div>
      <!-- Response -->
      <div class="hidden mt-3 border border-gray-200 rounded-lg overflow-hidden" id="resp-dep-list">
        <div class="flex items-center gap-2.5 px-3.5 py-2 bg-gray-50 border-b border-gray-200 text-xs">
          <span class="font-bold text-xs px-2 py-0.5 rounded" id="status-dep-list"></span>
          <span class="text-gray-400 mr-auto font-mono text-[11px]" id="time-dep-list"></span>
          <button class="px-2.5 py-1 bg-white border border-gray-200 rounded text-[11px] font-medium text-gray-500 hover:border-peru hover:text-peru cursor-pointer transition-all" data-target="body-dep-list">Copiar</button>
        </div>
        <div class="hidden resp-loading p-4 text-sm text-gray-400 bg-[#0D1117] gap-2.5" id="loading-dep-list">
          <div class="spinner"></div><span>Enviando petición...</span>
        </div>
        <pre class="bg-[#0D1117] text-[#E6EDF3] m-0 p-4 font-mono text-[12.5px] leading-relaxed overflow-x-auto max-h-[400px] overflow-y-auto" id="body-dep-list"></pre>
      </div>
    </div>
  </div>

  <!-- Example response -->
  <div class="mb-4">
    <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
      Ejemplo de respuesta · <span class="text-emerald-600 font-bold normal-case">200 OK</span>
    </div>
    <pre class="bg-[#0D1117] border border-[#30363D] rounded-lg p-4 md:p-5 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>[
  {"{"} "codigo": "01", "nombre": "AMAZONAS"  {"}"},
  {"{"} "codigo": "02", "nombre": "ANCASH"    {"}"},
  {"{"} "codigo": "03", "nombre": "APURIMAC"  {"}"},
  {"{"} "codigo": "15", "nombre": "LIMA"      {"}"},
  <span class="code-comment">// ... 25 departamentos en total</span>
]</code></pre>
  </div>

  <!-- Fields table -->
  <div class="text-[13px] font-bold text-gray-900 mb-2.5">Campos de la respuesta</div>
  <div class="overflow-x-auto border border-gray-200 rounded-lg">
    <table class="w-full text-[13px] min-w-[400px]">
      <thead><tr>
        <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Campo</th>
        <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Tipo</th>
        <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Descripción</th>
      </tr></thead>
      <tbody>
        <tr class="border-b border-gray-100">
          <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">codigo</code></td>
          <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">string</span></td>
          <td class="py-2.5 px-3.5 text-gray-500 text-xs">Código del departamento (2 dígitos)</td>
        </tr>
        <tr>
          <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">nombre</code></td>
          <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">string</span></td>
          <td class="py-2.5 px-3.5 text-gray-500 text-xs">Nombre oficial del departamento en mayúsculas</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>
