---
interface Props {
  baseUrl: string;
}
const { baseUrl } = Astro.props;
---

<section id="ep-departamento" class="px-4 py-8 md:px-8 md:py-10 lg:px-14 lg:py-12 max-w-[900px]">

  <div class="flex items-center gap-2.5 mb-3">
    <span class="text-[11px] font-bold px-2.5 py-[5px] rounded-[5px] bg-emerald-100 text-emerald-700 border border-emerald-200">GET</span>
    <code class="font-mono text-sm md:text-[15px] font-medium text-gray-900">/departamentos/<span class="path-param">{'{code}'}</span></code>
  </div>
  <h2 class="text-lg md:text-[22px] font-bold text-gray-900 m-0 mb-2.5 tracking-tight">Obtener departamento por código</h2>
  <p class="text-[13px] md:text-sm leading-relaxed text-gray-500 m-0 mb-6">
    Retorna la información detallada de un departamento junto con la lista de sus <strong class="text-gray-700">provincias</strong>.
  </p>

  <!-- Params -->
  <div class="text-[13px] font-bold text-gray-900 mb-2.5">Parámetros de ruta</div>
  <div class="overflow-x-auto border border-gray-200 rounded-lg mb-6">
    <table class="w-full text-[13px] min-w-[480px]">
      <thead><tr>
        <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Parámetro</th>
        <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Tipo</th>
        <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Requerido</th>
        <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Descripción</th>
      </tr></thead>
      <tbody><tr>
        <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">code</code></td>
        <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">string</span></td>
        <td class="py-2.5 px-3.5"><span class="text-[11px] px-[7px] py-[2px] bg-orange-50 text-peru rounded font-semibold">Sí</span></td>
        <td class="py-2.5 px-3.5 text-gray-500 text-xs">Código de 2 dígitos. Ej: <code class="font-mono bg-gray-100 px-1 rounded">15</code> para Lima</td>
      </tr></tbody>
    </table>
  </div>

  <!-- Tester -->
  <div class="border border-gray-200 rounded-xl overflow-hidden mb-7">
    <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200 text-[13px] font-semibold text-gray-500">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
      Probar endpoint
    </div>
    <div class="p-4">
      <div class="flex flex-col gap-1 mb-3">
        <label class="flex items-center gap-1.5">
          <span class="text-xs font-bold text-gray-900 font-mono">code</span>
          <span class="text-[11px] px-[7px] py-0.5 rounded bg-orange-50 text-peru font-semibold">requerido</span>
        </label>
        <input type="text" id="input-dep-code" class="w-full py-2 px-3 border border-gray-200 rounded-lg font-mono text-[13px] text-gray-900 bg-white outline-none focus:border-peru focus:ring-2 focus:ring-peru/10 transition-colors" placeholder="Ej: 15" maxlength="2" />
        <span class="text-[11px] text-gray-400">Código de 2 dígitos — 01 a 25</span>
      </div>
      <div class="flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white">
        <span class="py-2.5 px-3.5 text-[11px] font-bold tracking-wider bg-emerald-50 text-emerald-700 border-r border-gray-200 shrink-0">GET</span>
        <div class="flex-1 px-3 py-2.5 font-mono text-xs text-gray-500 overflow-hidden text-ellipsis whitespace-nowrap">
          <span id="url-dep-code">{baseUrl}/departamentos/<span class="url-param">{'{code}'}</span></span>
        </div>
        <button class="flex items-center gap-1.5 px-4 py-2.5 bg-peru hover:bg-peru-dark text-white border-none text-[13px] font-semibold cursor-pointer shrink-0 transition-colors active:scale-[0.98]" data-endpoint="dep-code">
          Enviar <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
        </button>
      </div>
      <div class="hidden mt-3 border border-gray-200 rounded-lg overflow-hidden" id="resp-dep-code">
        <div class="flex items-center gap-2.5 px-3.5 py-2 bg-gray-50 border-b border-gray-200 text-xs">
          <span class="font-bold text-xs px-2 py-0.5 rounded" id="status-dep-code"></span>
          <span class="text-gray-400 mr-auto font-mono text-[11px]" id="time-dep-code"></span>
          <button class="px-2.5 py-1 bg-white border border-gray-200 rounded text-[11px] font-medium text-gray-500 hover:border-peru hover:text-peru cursor-pointer transition-all" data-target="body-dep-code">Copiar</button>
        </div>
        <div class="hidden resp-loading p-4 text-sm text-gray-400 bg-[#0D1117] gap-2.5" id="loading-dep-code">
          <div class="spinner"></div><span>Enviando petición...</span>
        </div>
        <pre class="bg-[#0D1117] text-[#E6EDF3] m-0 p-4 font-mono text-[12.5px] leading-relaxed overflow-x-auto max-h-[400px] overflow-y-auto" id="body-dep-code"></pre>
      </div>
    </div>
  </div>

  <div class="mb-4">
    <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
      Ejemplo · <span class="text-emerald-600 font-bold normal-case">200 OK</span> · <code class="font-mono text-[11px] bg-gray-100 px-1 rounded">code=15</code>
    </div>
    <pre class="bg-[#0D1117] border border-[#30363D] rounded-lg p-4 md:p-5 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>{"{"}}
  "codigo": "15",
  "nombre": "LIMA",
  "provincias": [
    {"{"} "codigo": "1501", "nombre": "LIMA"      {"}"},
    {"{"} "codigo": "1502", "nombre": "BARRANCA"  {"}"},
    {"{"} "codigo": "1503", "nombre": "CAJATAMBO" {"}"},
    <span class="code-comment">// ... todas las provincias del departamento</span>
  ]
{"}"}</code></pre>
  </div>
  <div>
    <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
      Error · <span class="text-peru font-bold normal-case">404 Not Found</span>
    </div>
    <pre class="bg-[#0D1117] border border-red-900/40 rounded-lg p-4 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>{"{"} "error": "Departamento '99' no encontrado" {"}"}</code></pre>
  </div>
</section>
