---
import Layout from '../layouts/Layout.astro';
import "../styles/global.css";

const BASE_URL = "https://kmoxd00ic1.execute-api.us-east-1.amazonaws.com";
---

<Layout>
<div id="app" class="flex flex-col h-screen overflow-hidden">

  <!-- ═══ TOPBAR ═══ -->
  <header id="topbar" class="flex items-center justify-between px-6 h-14 bg-peru text-white shrink-0 z-[100] shadow-[0_1px_0_rgba(0,0,0,0.15)]">
    <div class="flex items-center gap-2.5">
      <!-- Hamburger: visible on mobile only -->
      <button id="menu-toggle" class="flex md:hidden items-center justify-center bg-white/15 border border-white/25 rounded-md text-white cursor-pointer p-1.5 shrink-0 hover:bg-white/25 transition-colors" aria-label="Abrir menú">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
      <div class="flex w-6 h-4 rounded-[2px] overflow-hidden shrink-0">
        <span class="flex-1 bg-peru"></span>
        <span class="flex-1 bg-white"></span>
        <span class="flex-1 bg-peru"></span>
      </div>
      <span class="text-base text-white/90 tracking-tight">Ubigeo <strong class="font-bold">Perú</strong></span>
      <span class="bg-white/20 text-white text-[10px] font-bold px-[7px] py-0.5 rounded-full tracking-[0.06em]">API</span>
      <span class="hidden md:inline text-white/60 text-xs">v1.0</span>
    </div>
    <div class="flex items-center gap-4">
      <span class="hidden md:inline text-xs text-white/75 font-medium">✦ Gratuita · Sin auth</span>
      <a href="https://github.com" target="_blank" rel="noopener noreferrer"
         class="flex items-center gap-1.5 text-white/85 no-underline text-sm font-medium px-3 py-[5px] border border-white/25 rounded-md hover:bg-white/12 hover:text-white transition-all">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844a9.59 9.59 0 0 1 2.504.337c1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.02 10.02 0 0 0 22 12.017C22 6.484 17.522 2 12 2Z"/>
        </svg>
        GitHub
      </a>
    </div>
  </header>

  <div id="body-layout" class="flex flex-1 overflow-hidden">

    <!-- Backdrop para mobile -->
    <div id="sidebar-overlay" class="hidden fixed inset-0 bg-black/45 backdrop-blur-[2px] z-[199]"></div>

    <!-- ═══ SIDEBAR ═══ -->
    <aside id="sidebar" class="w-[264px] shrink-0 bg-[#161618] border-r border-[#2A2A2E] overflow-y-auto flex flex-col">

      <div class="px-4 pt-5 pb-4 border-b border-[#2A2A2E]">
        <div class="text-[11px] font-semibold tracking-[0.08em] text-[#52525B] uppercase mb-1.5">Documentación</div>
        <div class="font-mono text-[10px] text-[#52525B] break-all leading-snug">{BASE_URL}</div>
      </div>

      <nav class="flex-1 py-3">
        <div class="mb-1">
          <div class="text-[10px] font-bold tracking-[0.1em] uppercase text-[#52525B] px-4 pt-2 pb-1">Inicio</div>
          <a href="#intro" class="nav-item flex items-center gap-2 py-[7px] px-4 no-underline text-[#A1A1AA] text-[13px] border-l-2 border-transparent hover:bg-peru/12 hover:text-white transition-all cursor-pointer" data-section="intro">
            <span class="w-1.5 h-1.5 rounded-full bg-[#3F3F46] shrink-0"></span>
            Introducción
          </a>
          <a href="#response-codes" class="nav-item flex items-center gap-2 py-[7px] px-4 no-underline text-[#A1A1AA] text-[13px] border-l-2 border-transparent hover:bg-peru/12 hover:text-white transition-all cursor-pointer" data-section="response-codes">
            <span class="w-1.5 h-1.5 rounded-full bg-[#3F3F46] shrink-0"></span>
            Códigos de respuesta
          </a>
        </div>

        <div class="mb-1">
          <div class="text-[10px] font-bold tracking-[0.1em] uppercase text-[#52525B] px-4 pt-2 pb-1">Endpoints</div>

          {[
            { section: 'ep-departamentos', path: '/departamentos' },
            { section: 'ep-departamento',  path: '/departamentos/{code}' },
            { section: 'ep-provincia',     path: '/provincias/{code}' },
            { section: 'ep-distrito',      path: '/distritos/{code}' },
            { section: 'ep-buscar',        path: '/buscar' },
          ].map(({ section, path }) => (
            <a href={`#${section}`}
               class="nav-item flex items-center gap-2 py-[7px] px-4 no-underline text-[#A1A1AA] text-[13px] border-l-2 border-transparent hover:bg-peru/12 hover:text-white transition-all cursor-pointer"
               data-section={section}>
              <span class="text-[9px] font-bold px-[5px] py-0.5 rounded-[3px] bg-emerald-900/50 text-emerald-400 shrink-0 tracking-[0.04em]">GET</span>
              <span>{path}</span>
            </a>
          ))}
        </div>
      </nav>

      <div class="p-4 border-t border-[#2A2A2E] flex items-center gap-2 text-[11px] text-[#52525B]">
        <div class="flex w-5 h-[13px] rounded-[2px] overflow-hidden shrink-0">
          <div class="flex-1 bg-peru"></div>
          <div class="flex-1 bg-white"></div>
          <div class="flex-1 bg-peru"></div>
        </div>
        <span>Perú · 2025</span>
      </div>
    </aside>

    <!-- ═══ MAIN ═══ -->
    <main id="main-content" class="flex-1 overflow-y-auto bg-white">

      <!-- ── INTRO ── -->
      <section id="intro" class="px-4 py-8 md:px-8 md:py-10 lg:px-14 lg:py-12 max-w-[900px]">
        <div class="flex items-center gap-2 text-xs font-semibold text-peru tracking-[0.04em] mb-4">
          <span class="w-1.5 h-1.5 rounded-full bg-peru"></span>
          API REST · Gratuita · Sin autenticación
        </div>
        <h1 class="text-[26px] md:text-4xl font-extrabold text-gray-900 m-0 mb-4 leading-tight tracking-tight">
          Ubigeo <span class="text-peru">Perú</span> API
        </h1>
        <p class="text-sm md:text-base leading-relaxed text-gray-500 m-0 mb-7 max-w-xl">
          Consulta la división político-administrativa del Perú en tiempo real.
          Accede a los <strong class="text-gray-700">25 departamentos</strong>,
          <strong class="text-gray-700">196 provincias</strong> y
          <strong class="text-gray-700">1 874 distritos</strong> del país con una simple petición HTTP.
        </p>

        <!-- Base URL box -->
        <div class="inline-flex flex-col gap-2.5 bg-gray-50 border border-gray-200 rounded-xl p-4 md:p-5 mb-7 w-full md:w-auto md:min-w-[460px]">
          <span class="text-[11px] font-semibold uppercase tracking-[0.08em] text-gray-400">Base URL</span>
          <div class="flex flex-wrap items-center gap-3">
            <code class="font-mono text-[11px] md:text-[13px] text-gray-900 font-medium break-all">{BASE_URL}</code>
            <button class="flex items-center gap-1.5 px-2.5 py-[5px] bg-white border border-gray-200 rounded-md text-xs font-medium text-gray-500 hover:border-peru hover:text-peru transition-all cursor-pointer shrink-0" data-copy={BASE_URL}>
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              Copiar
            </button>
          </div>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-8">
          {[
            { num: '25',    lbl: 'Departamentos' },
            { num: '196',   lbl: 'Provincias' },
            { num: '1 874', lbl: 'Distritos' },
            { num: '0',     lbl: 'Auth requerida', red: true },
          ].map(({ num, lbl, red }) => (
            <div class="bg-gray-50 border border-gray-200 rounded-xl p-4 text-center">
              <div class={`text-[22px] md:text-[28px] font-extrabold tracking-tight leading-none mb-1 ${red ? 'text-peru' : 'text-gray-900'}`}>{num}</div>
              <div class="text-[11px] text-gray-400 font-medium">{lbl}</div>
            </div>
          ))}
        </div>

        <!-- Terminal example -->
        <div>
          <div class="text-[11px] font-semibold uppercase tracking-[0.06em] text-gray-400 mb-2">Ejemplo rápido</div>
          <div class="rounded-xl overflow-hidden border border-[#30363D]">
            <div class="flex items-center gap-1.5 px-4 py-2.5 bg-[#21262D] border-b border-[#30363D]">
              <span class="w-3 h-3 rounded-full bg-[#FF5F57]"></span>
              <span class="w-3 h-3 rounded-full bg-[#FEBC2E]"></span>
              <span class="w-3 h-3 rounded-full bg-[#28C840]"></span>
              <span class="font-mono text-[11px] text-[#8B949E] ml-auto">bash</span>
            </div>
            <pre class="bg-[#0D1117] m-0 px-5 md:px-6 py-5 font-mono text-[11px] md:text-[13px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code><span class="text-[#8B949E]"># Obtener todos los departamentos</span>
curl <span class="text-[#A5D6FF]">"{BASE_URL}/departamentos"</span>

<span class="text-[#8B949E]"># Buscar por nombre</span>
curl <span class="text-[#A5D6FF]">"{BASE_URL}/buscar?q=miraflores"</span></code></pre>
          </div>
        </div>
      </section>

      <div class="h-px bg-gray-200 mx-4 md:mx-8 lg:mx-14"></div>

      <!-- ═══════════════════════════════
           ENDPOINT 1 · GET /departamentos
      ═══════════════════════════════ -->
      <section id="ep-departamentos" class="px-4 py-8 md:px-8 md:py-10 lg:px-14 lg:py-12 max-w-[900px]">

        <div class="flex items-center gap-2.5 mb-3">
          <span class="text-[11px] font-bold px-2.5 py-[5px] rounded-[5px] bg-emerald-100 text-emerald-700 border border-emerald-200">GET</span>
          <code class="font-mono text-sm md:text-[15px] font-medium text-gray-900">/departamentos</code>
        </div>
        <h2 class="text-lg md:text-[22px] font-bold text-gray-900 m-0 mb-2.5 tracking-tight">Listar todos los departamentos</h2>
        <p class="text-[13px] md:text-sm leading-relaxed text-gray-500 m-0 mb-6">
          Retorna la lista completa de los <strong class="text-gray-700">25 departamentos</strong> del Perú, ordenados por código.
        </p>

        <!-- Meta -->
        <div class="flex flex-col gap-2 bg-gray-50 border border-gray-200 rounded-lg px-4 py-3.5 mb-6">
          <div class="flex items-start gap-3 text-[13px]">
            <span class="text-[11px] font-semibold uppercase tracking-[0.04em] text-gray-400 min-w-[100px] pt-0.5">URL completa</span>
            <code class="font-mono text-xs text-gray-900 break-all">{BASE_URL}/departamentos</code>
          </div>
          <div class="flex items-center gap-3 text-[13px]">
            <span class="text-[11px] font-semibold uppercase tracking-[0.04em] text-gray-400 min-w-[100px]">Autenticación</span>
            <span class="text-emerald-600 font-semibold text-[13px]">Ninguna</span>
          </div>
        </div>

        <!-- Tester -->
        <div class="border border-gray-200 rounded-xl overflow-hidden mb-7">
          <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200 text-[13px] font-semibold text-gray-500">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            Probar endpoint
          </div>
          <div class="p-4">
            <div class="flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white">
              <span class="py-2.5 px-3.5 text-[11px] font-bold tracking-wider bg-emerald-50 text-emerald-700 border-r border-gray-200 shrink-0">GET</span>
              <div class="flex-1 px-3 py-2.5 font-mono text-xs text-gray-500 overflow-hidden text-ellipsis whitespace-nowrap">
                <span id="url-dep-list">{BASE_URL}/departamentos</span>
              </div>
              <button class="flex items-center gap-1.5 px-4 py-2.5 bg-peru hover:bg-peru-dark text-white border-none text-[13px] font-semibold cursor-pointer shrink-0 transition-colors active:scale-[0.98]" data-endpoint="dep-list">
                Enviar <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </button>
            </div>
            <!-- Response -->
            <div class="hidden mt-3 border border-gray-200 rounded-lg overflow-hidden" id="resp-dep-list">
              <div class="flex items-center gap-2.5 px-3.5 py-2 bg-gray-50 border-b border-gray-200 text-xs">
                <span class="font-bold text-xs px-2 py-0.5 rounded" id="status-dep-list"></span>
                <span class="text-gray-400 mr-auto font-mono text-[11px]" id="time-dep-list"></span>
                <button class="px-2.5 py-1 bg-white border border-gray-200 rounded text-[11px] font-medium text-gray-500 hover:border-peru hover:text-peru cursor-pointer transition-all" data-target="body-dep-list">Copiar</button>
              </div>
              <div class="hidden resp-loading p-4 text-sm text-gray-400 bg-[#0D1117] gap-2.5" id="loading-dep-list">
                <div class="spinner"></div><span>Enviando petición...</span>
              </div>
              <pre class="bg-[#0D1117] text-[#E6EDF3] m-0 p-4 font-mono text-[12.5px] leading-relaxed overflow-x-auto max-h-[400px] overflow-y-auto" id="body-dep-list"></pre>
            </div>
          </div>
        </div>

        <!-- Example response -->
        <div class="mb-4">
          <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
            Ejemplo de respuesta · <span class="text-emerald-600 font-bold normal-case">200 OK</span>
          </div>
          <pre class="bg-[#0D1117] border border-[#30363D] rounded-lg p-4 md:p-5 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>[
  {"{"} "codigo": "01", "nombre": "AMAZONAS"  {"}"},
  {"{"} "codigo": "02", "nombre": "ANCASH"    {"}"},
  {"{"} "codigo": "03", "nombre": "APURIMAC"  {"}"},
  {"{"} "codigo": "15", "nombre": "LIMA"      {"}"},
  <span class="code-comment">// ... 25 departamentos en total</span>
]</code></pre>
        </div>

        <!-- Fields table -->
        <div class="text-[13px] font-bold text-gray-900 mb-2.5">Campos de la respuesta</div>
        <div class="overflow-x-auto border border-gray-200 rounded-lg">
          <table class="w-full text-[13px] min-w-[400px]">
            <thead><tr>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Campo</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Tipo</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Descripción</th>
            </tr></thead>
            <tbody>
              <tr class="border-b border-gray-100">
                <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">codigo</code></td>
                <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">string</span></td>
                <td class="py-2.5 px-3.5 text-gray-500 text-xs">Código del departamento (2 dígitos)</td>
              </tr>
              <tr>
                <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">nombre</code></td>
                <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">string</span></td>
                <td class="py-2.5 px-3.5 text-gray-500 text-xs">Nombre oficial del departamento en mayúsculas</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <div class="h-px bg-gray-200 mx-4 md:mx-8 lg:mx-14"></div>

      <!-- ═══════════════════════════════════════
           ENDPOINT 2 · GET /departamentos/{code}
      ═══════════════════════════════════════ -->
      <section id="ep-departamento" class="px-4 py-8 md:px-8 md:py-10 lg:px-14 lg:py-12 max-w-[900px]">

        <div class="flex items-center gap-2.5 mb-3">
          <span class="text-[11px] font-bold px-2.5 py-[5px] rounded-[5px] bg-emerald-100 text-emerald-700 border border-emerald-200">GET</span>
          <code class="font-mono text-sm md:text-[15px] font-medium text-gray-900">/departamentos/<span class="path-param">{'{code}'}</span></code>
        </div>
        <h2 class="text-lg md:text-[22px] font-bold text-gray-900 m-0 mb-2.5 tracking-tight">Obtener departamento por código</h2>
        <p class="text-[13px] md:text-sm leading-relaxed text-gray-500 m-0 mb-6">
          Retorna la información detallada de un departamento junto con la lista de sus <strong class="text-gray-700">provincias</strong>.
        </p>

        <!-- Params -->
        <div class="text-[13px] font-bold text-gray-900 mb-2.5">Parámetros de ruta</div>
        <div class="overflow-x-auto border border-gray-200 rounded-lg mb-6">
          <table class="w-full text-[13px] min-w-[480px]">
            <thead><tr>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Parámetro</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Tipo</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Requerido</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Descripción</th>
            </tr></thead>
            <tbody><tr>
              <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">code</code></td>
              <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">string</span></td>
              <td class="py-2.5 px-3.5"><span class="text-[11px] px-[7px] py-[2px] bg-red-50 text-peru rounded font-semibold">Sí</span></td>
              <td class="py-2.5 px-3.5 text-gray-500 text-xs">Código de 2 dígitos. Ej: <code class="font-mono bg-gray-100 px-1 rounded">15</code> para Lima</td>
            </tr></tbody>
          </table>
        </div>

        <!-- Tester -->
        <div class="border border-gray-200 rounded-xl overflow-hidden mb-7">
          <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200 text-[13px] font-semibold text-gray-500">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            Probar endpoint
          </div>
          <div class="p-4">
            <div class="flex flex-col gap-1 mb-3">
              <label class="flex items-center gap-1.5">
                <span class="text-xs font-bold text-gray-900 font-mono">code</span>
                <span class="text-[11px] px-[7px] py-0.5 rounded bg-red-50 text-peru font-semibold">requerido</span>
              </label>
              <input type="text" id="input-dep-code" class="w-full py-2 px-3 border border-gray-200 rounded-lg font-mono text-[13px] text-gray-900 bg-white outline-none focus:border-peru focus:ring-2 focus:ring-peru/10 transition-colors" placeholder="Ej: 15" maxlength="2" />
              <span class="text-[11px] text-gray-400">Código de 2 dígitos — 01 a 25</span>
            </div>
            <div class="flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white">
              <span class="py-2.5 px-3.5 text-[11px] font-bold tracking-wider bg-emerald-50 text-emerald-700 border-r border-gray-200 shrink-0">GET</span>
              <div class="flex-1 px-3 py-2.5 font-mono text-xs text-gray-500 overflow-hidden text-ellipsis whitespace-nowrap">
                <span id="url-dep-code">{BASE_URL}/departamentos/<span class="url-param">{'{code}'}</span></span>
              </div>
              <button class="flex items-center gap-1.5 px-4 py-2.5 bg-peru hover:bg-peru-dark text-white border-none text-[13px] font-semibold cursor-pointer shrink-0 transition-colors active:scale-[0.98]" data-endpoint="dep-code">
                Enviar <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </button>
            </div>
            <div class="hidden mt-3 border border-gray-200 rounded-lg overflow-hidden" id="resp-dep-code">
              <div class="flex items-center gap-2.5 px-3.5 py-2 bg-gray-50 border-b border-gray-200 text-xs">
                <span class="font-bold text-xs px-2 py-0.5 rounded" id="status-dep-code"></span>
                <span class="text-gray-400 mr-auto font-mono text-[11px]" id="time-dep-code"></span>
                <button class="px-2.5 py-1 bg-white border border-gray-200 rounded text-[11px] font-medium text-gray-500 hover:border-peru hover:text-peru cursor-pointer transition-all" data-target="body-dep-code">Copiar</button>
              </div>
              <div class="hidden resp-loading p-4 text-sm text-gray-400 bg-[#0D1117] gap-2.5" id="loading-dep-code">
                <div class="spinner"></div><span>Enviando petición...</span>
              </div>
              <pre class="bg-[#0D1117] text-[#E6EDF3] m-0 p-4 font-mono text-[12.5px] leading-relaxed overflow-x-auto max-h-[400px] overflow-y-auto" id="body-dep-code"></pre>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
            Ejemplo · <span class="text-emerald-600 font-bold normal-case">200 OK</span> · <code class="font-mono text-[11px] bg-gray-100 px-1 rounded">code=15</code>
          </div>
          <pre class="bg-[#0D1117] border border-[#30363D] rounded-lg p-4 md:p-5 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>{"{"}}
  "codigo": "15",
  "nombre": "LIMA",
  "provincias": [
    {"{"} "codigo": "1501", "nombre": "LIMA"      {"}"},
    {"{"} "codigo": "1502", "nombre": "BARRANCA"  {"}"},
    {"{"} "codigo": "1503", "nombre": "CAJATAMBO" {"}"},
    <span class="code-comment">// ... todas las provincias del departamento</span>
  ]
{"}"}</code></pre>
        </div>
        <div>
          <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
            Error · <span class="text-peru font-bold normal-case">404 Not Found</span>
          </div>
          <pre class="bg-[#0D1117] border border-red-900/40 rounded-lg p-4 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>{"{"} "error": "Departamento '99' no encontrado" {"}"}</code></pre>
        </div>
      </section>

      <div class="h-px bg-gray-200 mx-4 md:mx-8 lg:mx-14"></div>

      <!-- ═══════════════════════════════════
           ENDPOINT 3 · GET /provincias/{code}
      ═══════════════════════════════════ -->
      <section id="ep-provincia" class="px-4 py-8 md:px-8 md:py-10 lg:px-14 lg:py-12 max-w-[900px]">

        <div class="flex items-center gap-2.5 mb-3">
          <span class="text-[11px] font-bold px-2.5 py-[5px] rounded-[5px] bg-emerald-100 text-emerald-700 border border-emerald-200">GET</span>
          <code class="font-mono text-sm md:text-[15px] font-medium text-gray-900">/provincias/<span class="path-param">{'{code}'}</span></code>
        </div>
        <h2 class="text-lg md:text-[22px] font-bold text-gray-900 m-0 mb-2.5 tracking-tight">Obtener provincia por código</h2>
        <p class="text-[13px] md:text-sm leading-relaxed text-gray-500 m-0 mb-6">
          Retorna la información de una provincia, su departamento padre y la lista completa de sus <strong class="text-gray-700">distritos</strong>.
        </p>

        <div class="text-[13px] font-bold text-gray-900 mb-2.5">Parámetros de ruta</div>
        <div class="overflow-x-auto border border-gray-200 rounded-lg mb-6">
          <table class="w-full text-[13px] min-w-[480px]">
            <thead><tr>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Parámetro</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Tipo</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Requerido</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Descripción</th>
            </tr></thead>
            <tbody><tr>
              <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">code</code></td>
              <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">string</span></td>
              <td class="py-2.5 px-3.5"><span class="text-[11px] px-[7px] py-[2px] bg-red-50 text-peru rounded font-semibold">Sí</span></td>
              <td class="py-2.5 px-3.5 text-gray-500 text-xs">Código de 4 dígitos. Ej: <code class="font-mono bg-gray-100 px-1 rounded">1501</code> para Lima</td>
            </tr></tbody>
          </table>
        </div>

        <!-- Tester -->
        <div class="border border-gray-200 rounded-xl overflow-hidden mb-7">
          <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200 text-[13px] font-semibold text-gray-500">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            Probar endpoint
          </div>
          <div class="p-4">
            <div class="flex flex-col gap-1 mb-3">
              <label class="flex items-center gap-1.5">
                <span class="text-xs font-bold text-gray-900 font-mono">code</span>
                <span class="text-[11px] px-[7px] py-0.5 rounded bg-red-50 text-peru font-semibold">requerido</span>
              </label>
              <input type="text" id="input-prov-code" class="w-full py-2 px-3 border border-gray-200 rounded-lg font-mono text-[13px] text-gray-900 bg-white outline-none focus:border-peru focus:ring-2 focus:ring-peru/10 transition-colors" placeholder="Ej: 1501" maxlength="4" />
              <span class="text-[11px] text-gray-400">Código de 4 dígitos — primeros 2 = departamento</span>
            </div>
            <div class="flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white">
              <span class="py-2.5 px-3.5 text-[11px] font-bold tracking-wider bg-emerald-50 text-emerald-700 border-r border-gray-200 shrink-0">GET</span>
              <div class="flex-1 px-3 py-2.5 font-mono text-xs text-gray-500 overflow-hidden text-ellipsis whitespace-nowrap">
                <span id="url-prov-code">{BASE_URL}/provincias/<span class="url-param">{'{code}'}</span></span>
              </div>
              <button class="flex items-center gap-1.5 px-4 py-2.5 bg-peru hover:bg-peru-dark text-white border-none text-[13px] font-semibold cursor-pointer shrink-0 transition-colors active:scale-[0.98]" data-endpoint="prov-code">
                Enviar <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </button>
            </div>
            <div class="hidden mt-3 border border-gray-200 rounded-lg overflow-hidden" id="resp-prov-code">
              <div class="flex items-center gap-2.5 px-3.5 py-2 bg-gray-50 border-b border-gray-200 text-xs">
                <span class="font-bold text-xs px-2 py-0.5 rounded" id="status-prov-code"></span>
                <span class="text-gray-400 mr-auto font-mono text-[11px]" id="time-prov-code"></span>
                <button class="px-2.5 py-1 bg-white border border-gray-200 rounded text-[11px] font-medium text-gray-500 hover:border-peru hover:text-peru cursor-pointer transition-all" data-target="body-prov-code">Copiar</button>
              </div>
              <div class="hidden resp-loading p-4 text-sm text-gray-400 bg-[#0D1117] gap-2.5" id="loading-prov-code">
                <div class="spinner"></div><span>Enviando petición...</span>
              </div>
              <pre class="bg-[#0D1117] text-[#E6EDF3] m-0 p-4 font-mono text-[12.5px] leading-relaxed overflow-x-auto max-h-[400px] overflow-y-auto" id="body-prov-code"></pre>
            </div>
          </div>
        </div>

        <div>
          <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
            Ejemplo · <span class="text-emerald-600 font-bold normal-case">200 OK</span> · <code class="font-mono text-[11px] bg-gray-100 px-1 rounded">code=1501</code>
          </div>
          <pre class="bg-[#0D1117] border border-[#30363D] rounded-lg p-4 md:p-5 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>{"{"}}
  "codigo": "1501",
  "nombre": "LIMA",
  "departamento": {"{"} "codigo": "15", "nombre": "LIMA" {"}"},
  "distritos": [
    {"{"} "codigo": "150101", "nombre": "LIMA"       {"}"},
    {"{"} "codigo": "150102", "nombre": "ANCON"      {"}"},
    {"{"} "codigo": "150118", "nombre": "MIRAFLORES" {"}"},
    <span class="code-comment">// ... todos los distritos de la provincia</span>
  ]
{"}"}</code></pre>
        </div>
      </section>

      <div class="h-px bg-gray-200 mx-4 md:mx-8 lg:mx-14"></div>

      <!-- ═══════════════════════════════════
           ENDPOINT 4 · GET /distritos/{code}
      ═══════════════════════════════════ -->
      <section id="ep-distrito" class="px-4 py-8 md:px-8 md:py-10 lg:px-14 lg:py-12 max-w-[900px]">

        <div class="flex items-center gap-2.5 mb-3">
          <span class="text-[11px] font-bold px-2.5 py-[5px] rounded-[5px] bg-emerald-100 text-emerald-700 border border-emerald-200">GET</span>
          <code class="font-mono text-sm md:text-[15px] font-medium text-gray-900">/distritos/<span class="path-param">{'{code}'}</span></code>
        </div>
        <h2 class="text-lg md:text-[22px] font-bold text-gray-900 m-0 mb-2.5 tracking-tight">Obtener distrito por código</h2>
        <p class="text-[13px] md:text-sm leading-relaxed text-gray-500 m-0 mb-6">
          Retorna la información completa de un distrito: nombre, capital, región natural, provincia y departamento.
        </p>

        <div class="text-[13px] font-bold text-gray-900 mb-2.5">Parámetros de ruta</div>
        <div class="overflow-x-auto border border-gray-200 rounded-lg mb-6">
          <table class="w-full text-[13px] min-w-[480px]">
            <thead><tr>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Parámetro</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Tipo</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Requerido</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Descripción</th>
            </tr></thead>
            <tbody><tr>
              <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">code</code></td>
              <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">string</span></td>
              <td class="py-2.5 px-3.5"><span class="text-[11px] px-[7px] py-[2px] bg-red-50 text-peru rounded font-semibold">Sí</span></td>
              <td class="py-2.5 px-3.5 text-gray-500 text-xs">Código de 6 dígitos. Ej: <code class="font-mono bg-gray-100 px-1 rounded">150118</code> para Miraflores</td>
            </tr></tbody>
          </table>
        </div>

        <!-- Tester -->
        <div class="border border-gray-200 rounded-xl overflow-hidden mb-7">
          <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200 text-[13px] font-semibold text-gray-500">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            Probar endpoint
          </div>
          <div class="p-4">
            <div class="flex flex-col gap-1 mb-3">
              <label class="flex items-center gap-1.5">
                <span class="text-xs font-bold text-gray-900 font-mono">code</span>
                <span class="text-[11px] px-[7px] py-0.5 rounded bg-red-50 text-peru font-semibold">requerido</span>
              </label>
              <input type="text" id="input-dist-code" class="w-full py-2 px-3 border border-gray-200 rounded-lg font-mono text-[13px] text-gray-900 bg-white outline-none focus:border-peru focus:ring-2 focus:ring-peru/10 transition-colors" placeholder="Ej: 150118" maxlength="6" />
              <span class="text-[11px] text-gray-400">Código de 6 dígitos — dep(2) + prov(2) + dist(2)</span>
            </div>
            <div class="flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white">
              <span class="py-2.5 px-3.5 text-[11px] font-bold tracking-wider bg-emerald-50 text-emerald-700 border-r border-gray-200 shrink-0">GET</span>
              <div class="flex-1 px-3 py-2.5 font-mono text-xs text-gray-500 overflow-hidden text-ellipsis whitespace-nowrap">
                <span id="url-dist-code">{BASE_URL}/distritos/<span class="url-param">{'{code}'}</span></span>
              </div>
              <button class="flex items-center gap-1.5 px-4 py-2.5 bg-peru hover:bg-peru-dark text-white border-none text-[13px] font-semibold cursor-pointer shrink-0 transition-colors active:scale-[0.98]" data-endpoint="dist-code">
                Enviar <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </button>
            </div>
            <div class="hidden mt-3 border border-gray-200 rounded-lg overflow-hidden" id="resp-dist-code">
              <div class="flex items-center gap-2.5 px-3.5 py-2 bg-gray-50 border-b border-gray-200 text-xs">
                <span class="font-bold text-xs px-2 py-0.5 rounded" id="status-dist-code"></span>
                <span class="text-gray-400 mr-auto font-mono text-[11px]" id="time-dist-code"></span>
                <button class="px-2.5 py-1 bg-white border border-gray-200 rounded text-[11px] font-medium text-gray-500 hover:border-peru hover:text-peru cursor-pointer transition-all" data-target="body-dist-code">Copiar</button>
              </div>
              <div class="hidden resp-loading p-4 text-sm text-gray-400 bg-[#0D1117] gap-2.5" id="loading-dist-code">
                <div class="spinner"></div><span>Enviando petición...</span>
              </div>
              <pre class="bg-[#0D1117] text-[#E6EDF3] m-0 p-4 font-mono text-[12.5px] leading-relaxed overflow-x-auto max-h-[400px] overflow-y-auto" id="body-dist-code"></pre>
            </div>
          </div>
        </div>

        <div class="mb-6">
          <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
            Ejemplo · <span class="text-emerald-600 font-bold normal-case">200 OK</span> · <code class="font-mono text-[11px] bg-gray-100 px-1 rounded">code=150118</code>
          </div>
          <pre class="bg-[#0D1117] border border-[#30363D] rounded-lg p-4 md:p-5 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>{"{"}}
  "codigo":        "150118",
  "nombre":        "MIRAFLORES",
  "capital":       "MIRAFLORES",
  "regionNatural": "COSTA",
  "provincia":    {"{"} "codigo": "1501", "nombre": "LIMA" {"}"},
  "departamento": {"{"} "codigo": "15",   "nombre": "LIMA" {"}"}
{"}"}</code></pre>
        </div>

        <div class="text-[13px] font-bold text-gray-900 mb-2.5">Campos de la respuesta</div>
        <div class="overflow-x-auto border border-gray-200 rounded-lg">
          <table class="w-full text-[13px] min-w-[480px]">
            <thead><tr>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Campo</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Tipo</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Descripción</th>
            </tr></thead>
            <tbody>
              {[
                ['codigo',        'string', 'Código UBIGEO del distrito (6 dígitos)'],
                ['nombre',        'string', 'Nombre oficial del distrito'],
                ['capital',       'string', 'Nombre de la capital del distrito'],
                ['regionNatural', 'string', 'COSTA, SIERRA o SELVA'],
                ['provincia',     'object', 'Provincia a la que pertenece (codigo, nombre)'],
                ['departamento',  'object', 'Departamento al que pertenece (codigo, nombre)'],
              ].map(([field, type, desc], i, arr) => (
                <tr class={i < arr.length - 1 ? 'border-b border-gray-100' : ''}>
                  <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">{field}</code></td>
                  <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">{type}</span></td>
                  <td class="py-2.5 px-3.5 text-gray-500 text-xs">{desc}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </section>

      <div class="h-px bg-gray-200 mx-4 md:mx-8 lg:mx-14"></div>

      <!-- ═══════════════════════════
           ENDPOINT 5 · GET /buscar
      ═══════════════════════════ -->
      <section id="ep-buscar" class="px-4 py-8 md:px-8 md:py-10 lg:px-14 lg:py-12 max-w-[900px]">

        <div class="flex items-center gap-2.5 mb-3">
          <span class="text-[11px] font-bold px-2.5 py-[5px] rounded-[5px] bg-emerald-100 text-emerald-700 border border-emerald-200">GET</span>
          <code class="font-mono text-sm md:text-[15px] font-medium text-gray-900">/buscar</code>
        </div>
        <h2 class="text-lg md:text-[22px] font-bold text-gray-900 m-0 mb-2.5 tracking-tight">Buscar por nombre</h2>
        <p class="text-[13px] md:text-sm leading-relaxed text-gray-500 m-0 mb-6">
          Búsqueda de texto libre con soporte multi-palabra (<strong class="text-gray-700">AND</strong>), insensible a tildes y mayúsculas.
          Devuelve el árbol completo: distrito → provincia → departamento.
        </p>

        <div class="text-[13px] font-bold text-gray-900 mb-2.5">Query parameters</div>
        <div class="overflow-x-auto border border-gray-200 rounded-lg mb-6">
          <table class="w-full text-[13px] min-w-[520px]">
            <thead><tr>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Parámetro</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Tipo</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Requerido</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Default</th>
              <th class="bg-gray-50 text-gray-400 font-semibold text-[11px] uppercase tracking-[0.06em] px-3.5 py-2.5 text-left border-b border-gray-200">Descripción</th>
            </tr></thead>
            <tbody>
              <tr class="border-b border-gray-100">
                <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">q</code></td>
                <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">string</span></td>
                <td class="py-2.5 px-3.5"><span class="text-[11px] px-[7px] py-[2px] bg-red-50 text-peru rounded font-semibold">Sí</span></td>
                <td class="py-2.5 px-3.5 text-gray-400 text-xs">—</td>
                <td class="py-2.5 px-3.5 text-gray-500 text-xs">Texto de búsqueda (mín. 2 caracteres)</td>
              </tr>
              <tr>
                <td class="py-2.5 px-3.5"><code class="font-mono text-xs font-semibold text-gray-900">limit</code></td>
                <td class="py-2.5 px-3.5"><span class="font-mono text-[11px] px-[7px] py-[2px] bg-violet-100 text-violet-700 rounded font-medium">number</span></td>
                <td class="py-2.5 px-3.5"><span class="text-[11px] px-[7px] py-[2px] bg-gray-100 text-gray-500 rounded font-medium">No</span></td>
                <td class="py-2.5 px-3.5"><code class="font-mono text-xs bg-gray-100 px-1 rounded">20</code></td>
                <td class="py-2.5 px-3.5 text-gray-500 text-xs">Máximo de resultados a retornar</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Tester -->
        <div class="border border-gray-200 rounded-xl overflow-hidden mb-7">
          <div class="flex items-center gap-2 px-4 py-3 bg-gray-50 border-b border-gray-200 text-[13px] font-semibold text-gray-500">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
            Probar endpoint
          </div>
          <div class="p-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-3">
              <div class="flex flex-col gap-1">
                <label class="flex items-center gap-1.5">
                  <span class="text-xs font-bold text-gray-900 font-mono">q</span>
                  <span class="text-[11px] px-[7px] py-0.5 rounded bg-red-50 text-peru font-semibold">requerido</span>
                </label>
                <input type="text" id="input-buscar-q" class="w-full py-2 px-3 border border-gray-200 rounded-lg font-mono text-[13px] text-gray-900 bg-white outline-none focus:border-peru focus:ring-2 focus:ring-peru/10 transition-colors" placeholder="Ej: miraflores" />
                <span class="text-[11px] text-gray-400">Mínimo 2 caracteres</span>
              </div>
              <div class="flex flex-col gap-1">
                <label class="flex items-center gap-1.5">
                  <span class="text-xs font-bold text-gray-900 font-mono">limit</span>
                  <span class="text-[11px] px-[7px] py-0.5 rounded bg-gray-100 text-gray-500 font-medium">opcional</span>
                </label>
                <input type="number" id="input-buscar-limit" class="w-full py-2 px-3 border border-gray-200 rounded-lg font-mono text-[13px] text-gray-900 bg-white outline-none focus:border-peru focus:ring-2 focus:ring-peru/10 transition-colors" placeholder="20" min="1" max="100" />
                <span class="text-[11px] text-gray-400">Default: 20, máx: 100</span>
              </div>
            </div>
            <div class="flex items-center border border-gray-200 rounded-lg overflow-hidden bg-white">
              <span class="py-2.5 px-3.5 text-[11px] font-bold tracking-wider bg-emerald-50 text-emerald-700 border-r border-gray-200 shrink-0">GET</span>
              <div class="flex-1 px-3 py-2.5 font-mono text-xs text-gray-500 overflow-hidden text-ellipsis whitespace-nowrap">
                <span id="url-buscar">{BASE_URL}/buscar?q=<span class="url-param">{'{q}'}</span></span>
              </div>
              <button class="flex items-center gap-1.5 px-4 py-2.5 bg-peru hover:bg-peru-dark text-white border-none text-[13px] font-semibold cursor-pointer shrink-0 transition-colors active:scale-[0.98]" data-endpoint="buscar">
                Enviar <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
              </button>
            </div>
            <div class="hidden mt-3 border border-gray-200 rounded-lg overflow-hidden" id="resp-buscar">
              <div class="flex items-center gap-2.5 px-3.5 py-2 bg-gray-50 border-b border-gray-200 text-xs">
                <span class="font-bold text-xs px-2 py-0.5 rounded" id="status-buscar"></span>
                <span class="text-gray-400 mr-auto font-mono text-[11px]" id="time-buscar"></span>
                <button class="px-2.5 py-1 bg-white border border-gray-200 rounded text-[11px] font-medium text-gray-500 hover:border-peru hover:text-peru cursor-pointer transition-all" data-target="body-buscar">Copiar</button>
              </div>
              <div class="hidden resp-loading p-4 text-sm text-gray-400 bg-[#0D1117] gap-2.5" id="loading-buscar">
                <div class="spinner"></div><span>Enviando petición...</span>
              </div>
              <pre class="bg-[#0D1117] text-[#E6EDF3] m-0 p-4 font-mono text-[12.5px] leading-relaxed overflow-x-auto max-h-[400px] overflow-y-auto" id="body-buscar"></pre>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
            Ejemplo · <span class="text-emerald-600 font-bold normal-case">200 OK</span> · <code class="font-mono text-[11px] bg-gray-100 px-1 rounded">q=san isidro</code>
          </div>
          <pre class="bg-[#0D1117] border border-[#30363D] rounded-lg p-4 md:p-5 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>{"{"}}
  "query": "san isidro",
  "total": 3,
  "resultados": [
    {"{"}}
      "codigo":       "150131",
      "nombre":       "SAN ISIDRO",
      "provincia":    {"{"} "codigo": "1501", "nombre": "LIMA"     {"}"},
      "departamento": {"{"} "codigo": "15",   "nombre": "LIMA"     {"}"}
    {"}"},
    {"{"}}
      "codigo":       "040101",
      "nombre":       "SAN ISIDRO",
      "provincia":    {"{"} "codigo": "0401", "nombre": "AREQUIPA" {"}"},
      "departamento": {"{"} "codigo": "04",   "nombre": "AREQUIPA" {"}"}
    {"}"}
    <span class="code-comment">// ...</span>
  ]
{"}"}</code></pre>
        </div>
        <div>
          <div class="text-[11px] font-semibold uppercase tracking-[0.05em] text-gray-400 mb-2">
            Error · <span class="text-peru font-bold normal-case">400 Bad Request</span>
          </div>
          <pre class="bg-[#0D1117] border border-red-900/40 rounded-lg p-4 m-0 font-mono text-[12.5px] leading-relaxed text-[#E6EDF3] overflow-x-auto"><code>{"{"} "error": "El parámetro q debe tener al menos 2 caracteres" {"}"}</code></pre>
        </div>
      </section>

      <div class="h-px bg-gray-200 mx-4 md:mx-8 lg:mx-14"></div>

      <!-- ═══════════════════════════
           RESPONSE CODES
      ═══════════════════════════ -->
      <section id="response-codes" class="px-4 py-8 md:px-8 md:py-10 lg:px-14 lg:py-12 max-w-[900px]">
        <h2 class="text-lg md:text-[22px] font-bold text-gray-900 m-0 mb-2.5 tracking-tight">Códigos de respuesta</h2>
        <p class="text-[13px] md:text-sm leading-relaxed text-gray-500 m-0 mb-6">La API utiliza códigos HTTP estándar para indicar el resultado de cada petición.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-6">
          <div class="rounded-xl p-[18px] bg-emerald-50 border border-emerald-200">
            <div class="text-[26px] font-extrabold tracking-tight text-emerald-700 mb-0.5 leading-none">200</div>
            <div class="text-[13px] font-bold text-gray-900 mb-1.5">OK</div>
            <div class="text-xs leading-relaxed text-gray-500">La petición fue exitosa. El cuerpo contiene los datos en formato JSON.</div>
          </div>
          <div class="rounded-xl p-[18px] bg-amber-50 border border-amber-200">
            <div class="text-[26px] font-extrabold tracking-tight text-amber-700 mb-0.5 leading-none">400</div>
            <div class="text-[13px] font-bold text-gray-900 mb-1.5">Bad Request</div>
            <div class="text-xs leading-relaxed text-gray-500">Parámetros inválidos. Ej: código con longitud incorrecta o query demasiado corta.</div>
          </div>
          <div class="rounded-xl p-[18px] bg-red-50 border border-red-200">
            <div class="text-[26px] font-extrabold tracking-tight text-peru mb-0.5 leading-none">404</div>
            <div class="text-[13px] font-bold text-gray-900 mb-1.5">Not Found</div>
            <div class="text-xs leading-relaxed text-gray-500">El recurso solicitado no existe. Ej: código de departamento o distrito inexistente.</div>
          </div>
          <div class="rounded-xl p-[18px] bg-violet-50 border border-violet-200">
            <div class="text-[26px] font-extrabold tracking-tight text-violet-700 mb-0.5 leading-none">500</div>
            <div class="text-[13px] font-bold text-gray-900 mb-1.5">Server Error</div>
            <div class="text-xs leading-relaxed text-gray-500">Error interno del servidor. Intenta nuevamente en unos momentos.</div>
          </div>
        </div>

        <div class="flex gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg text-[13px] text-blue-800 leading-relaxed">
          <svg class="shrink-0 mt-0.5" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
          <div>
            <strong>Formato de error</strong> — Todos los errores retornan un JSON con el campo <code class="font-mono text-xs bg-blue-100 px-1 rounded">error</code>:
            <code class="font-mono text-xs bg-blue-100 px-1 rounded ml-1">{"{"} "error": "mensaje descriptivo" {"}"}</code>
          </div>
        </div>
      </section>

      <!-- FOOTER -->
      <footer class="px-4 py-7 md:px-8 lg:px-14 border-t border-gray-200 flex flex-col items-center gap-2 text-center">
        <div class="flex w-5 h-[13px] rounded-[2px] overflow-hidden">
          <div class="flex-1 bg-peru"></div>
          <div class="flex-1 bg-white border-y border-gray-200"></div>
          <div class="flex-1 bg-peru"></div>
        </div>
        <p class="m-0 text-[13px] text-gray-400">Ubigeo Perú API · Gratuita y de código abierto · Datos oficiales INEI</p>
        <p class="m-0 text-xs text-gray-400">Construida con ❤️ para los desarrolladores peruanos</p>
      </footer>

    </main>
  </div>
</div>
</Layout>

<!-- ═══════════════════════════════ STYLE (minimal) ═══════════════════════════════ -->
<style>
  /* Drawer animation */
  #sidebar { transition: transform 0.25s cubic-bezier(0.4,0,0.2,1); }

  /* Mobile: sidebar como overlay deslizante */
  @media (max-width: 767px) {
    #sidebar {
      position: fixed; top: 56px; left: 0; bottom: 0;
      z-index: 200; width: 280px;
      transform: translateX(-100%);
      box-shadow: 4px 0 24px rgba(0,0,0,0.35);
    }
    #sidebar.open { transform: translateX(0); }
  }

  /* Active nav item (JS-toggled) */
  .nav-item.active {
    background: rgba(206,17,38,0.1);
    color: #fff;
    border-left-color: #CE1126;
  }

  /* JSON syntax highlighting */
  .j-key  { color: #79C0FF; }
  .j-str  { color: #A5D6FF; }
  .j-num  { color: #F78166; }
  .j-bool { color: #FF9E64; }
  .j-null { color: #A5D6FF; }
  .code-comment { color: #8B949E; font-style: italic; }
  .url-param, .path-param { color: #CE1126; font-style: italic; }

  /* Response status badges (JS sets className) */
  .resp-status.ok  { background: #D1FAE5; color: #065F46; }
  .resp-status.err { background: #FEE2E2; color: #991B1B; }

  /* Loading row needs flex when not hidden */
  .resp-loading:not(.hidden) { display: flex; align-items: center; }

  /* Spinner */
  @keyframes spin { to { transform: rotate(360deg); } }
  .spinner {
    width: 16px; height: 16px;
    border: 2px solid #333; border-top-color: #CE1126;
    border-radius: 50%; animation: spin .7s linear infinite; flex-shrink: 0;
  }

  /* Scrollbars */
  #sidebar::-webkit-scrollbar, #main-content::-webkit-scrollbar { width: 6px; }
  #sidebar::-webkit-scrollbar-track, #main-content::-webkit-scrollbar-track { background: transparent; }
  #sidebar::-webkit-scrollbar-thumb { background: #2A2A2E; border-radius: 3px; }
  #main-content::-webkit-scrollbar-thumb { background: #D1D5DB; border-radius: 3px; }
</style>

<!-- ═══════════════════════════════ SCRIPT ═══════════════════════════════ -->
<script is:inline define:vars={{ BASE_URL }}>
  const BASE = BASE_URL;

  function highlightJSON(json) {
    if (typeof json !== 'string') json = JSON.stringify(json, null, 2);
    return json
      .replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')
      .replace(
        /("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,
        (match) => {
          let cls = 'j-num';
          if (/^"/.test(match)) cls = /:$/.test(match) ? 'j-key' : 'j-str';
          else if (/true|false/.test(match)) cls = 'j-bool';
          else if (/null/.test(match)) cls = 'j-null';
          return `<span class="${cls}">${match}</span>`;
        }
      );
  }

  async function callAPI(id, url) {
    const panel     = document.getElementById(`resp-${id}`);
    const statusEl  = document.getElementById(`status-${id}`);
    const timeEl    = document.getElementById(`time-${id}`);
    const bodyEl    = document.getElementById(`body-${id}`);
    const loadingEl = document.getElementById(`loading-${id}`);

    panel.classList.remove('hidden');
    loadingEl.classList.remove('hidden');
    bodyEl.innerHTML = '';

    const start = Date.now();
    try {
      const res     = await fetch(url);
      const elapsed = Date.now() - start;
      const data    = await res.json();
      statusEl.textContent = `${res.status} ${res.statusText || (res.ok ? 'OK' : 'Error')}`;
      statusEl.className   = `resp-status font-bold text-xs px-2 py-0.5 rounded ${res.ok ? 'ok' : 'err'}`;
      timeEl.textContent   = `${elapsed} ms`;
      bodyEl.innerHTML     = highlightJSON(data);
    } catch (e) {
      statusEl.textContent = 'Error de red';
      statusEl.className   = 'resp-status font-bold text-xs px-2 py-0.5 rounded err';
      timeEl.textContent   = `${Date.now() - start} ms`;
      bodyEl.textContent   = e.message;
    } finally {
      loadingEl.classList.add('hidden');
    }
  }

  function updateUrl(id, url) {
    const el = document.getElementById(`url-${id}`);
    if (el) el.textContent = url;
  }

  // ── Endpoint 1: GET /departamentos ──
  document.querySelector('[data-endpoint="dep-list"]')?.addEventListener('click', () => {
    callAPI('dep-list', `${BASE}/departamentos`);
  });

  // ── Endpoint 2: GET /departamentos/{code} ──
  const depCodeInput = document.getElementById('input-dep-code');
  depCodeInput?.addEventListener('input', () => {
    updateUrl('dep-code', `${BASE}/departamentos/${depCodeInput.value.trim() || '{code}'}`);
  });
  document.querySelector('[data-endpoint="dep-code"]')?.addEventListener('click', () => {
    const v = depCodeInput?.value.trim();
    if (!v) { depCodeInput?.focus(); return; }
    callAPI('dep-code', `${BASE}/departamentos/${encodeURIComponent(v)}`);
  });

  // ── Endpoint 3: GET /provincias/{code} ──
  const provCodeInput = document.getElementById('input-prov-code');
  provCodeInput?.addEventListener('input', () => {
    updateUrl('prov-code', `${BASE}/provincias/${provCodeInput.value.trim() || '{code}'}`);
  });
  document.querySelector('[data-endpoint="prov-code"]')?.addEventListener('click', () => {
    const v = provCodeInput?.value.trim();
    if (!v) { provCodeInput?.focus(); return; }
    callAPI('prov-code', `${BASE}/provincias/${encodeURIComponent(v)}`);
  });

  // ── Endpoint 4: GET /distritos/{code} ──
  const distCodeInput = document.getElementById('input-dist-code');
  distCodeInput?.addEventListener('input', () => {
    updateUrl('dist-code', `${BASE}/distritos/${distCodeInput.value.trim() || '{code}'}`);
  });
  document.querySelector('[data-endpoint="dist-code"]')?.addEventListener('click', () => {
    const v = distCodeInput?.value.trim();
    if (!v) { distCodeInput?.focus(); return; }
    callAPI('dist-code', `${BASE}/distritos/${encodeURIComponent(v)}`);
  });

  // ── Endpoint 5: GET /buscar ──
  const buscarQ     = document.getElementById('input-buscar-q');
  const buscarLimit = document.getElementById('input-buscar-limit');
  function updateBuscarUrl() {
    const q     = buscarQ?.value.trim() || '{q}';
    const limit = buscarLimit?.value.trim();
    updateUrl('buscar', `${BASE}/buscar?q=${q}${limit ? `&limit=${limit}` : ''}`);
  }
  buscarQ?.addEventListener('input', updateBuscarUrl);
  buscarLimit?.addEventListener('input', updateBuscarUrl);
  document.querySelector('[data-endpoint="buscar"]')?.addEventListener('click', () => {
    const q = buscarQ?.value.trim();
    if (!q || q.length < 2) { buscarQ?.focus(); return; }
    const limit = buscarLimit?.value.trim();
    callAPI('buscar', `${BASE}/buscar?q=${encodeURIComponent(q)}${limit ? `&limit=${encodeURIComponent(limit)}` : ''}`);
  });

  // ── Copy buttons ──
  document.querySelectorAll('[data-copy]').forEach(btn => {
    btn.addEventListener('click', () => {
      navigator.clipboard?.writeText(btn.dataset.copy).then(() => {
        const orig = btn.innerHTML;
        btn.textContent = '✓ Copiado';
        setTimeout(() => { btn.innerHTML = orig; }, 1500);
      });
    });
  });
  document.querySelectorAll('[data-target]').forEach(btn => {
    btn.addEventListener('click', () => {
      const el = document.getElementById(btn.dataset.target);
      if (!el) return;
      navigator.clipboard?.writeText(el.textContent).then(() => {
        const orig = btn.textContent;
        btn.textContent = '✓ Copiado';
        setTimeout(() => { btn.textContent = orig; }, 1500);
      });
    });
  });

  // ── Sidebar active state ──
  const navItems = document.querySelectorAll('.nav-item[data-section]');
  const obs = new IntersectionObserver(
    (entries) => entries.forEach(e => {
      if (e.isIntersecting)
        navItems.forEach(i => i.classList.toggle('active', i.dataset.section === e.target.id));
    }),
    { rootMargin: '-20% 0px -70% 0px' }
  );
  document.querySelectorAll('[id]').forEach(s => obs.observe(s));

  navItems.forEach(item => {
    item.addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById(item.dataset.section)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      closeSidebar();
    });
  });

  // ── Mobile sidebar ──
  const sidebar  = document.getElementById('sidebar');
  const overlay  = document.getElementById('sidebar-overlay');
  const menuBtn  = document.getElementById('menu-toggle');

  function openSidebar()  { sidebar?.classList.add('open'); overlay?.classList.remove('hidden'); document.body.style.overflow = 'hidden'; }
  function closeSidebar() { sidebar?.classList.remove('open'); overlay?.classList.add('hidden'); document.body.style.overflow = ''; }

  menuBtn?.addEventListener('click', () => sidebar?.classList.contains('open') ? closeSidebar() : openSidebar());
  overlay?.addEventListener('click', closeSidebar);
  window.addEventListener('resize', () => { if (window.innerWidth > 768) closeSidebar(); });
</script>
